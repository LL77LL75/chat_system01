<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat App â€“ Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
</head>
<body>

<div class="dashboard-container">

    <!-- Account Panel -->
    <div class="account-panel">
        <h3>Account</h3>
        <button onclick="openAccountPopup()">Account</button>
        <button onclick="logout()">Logout</button>

        <!-- Core/Pioneer Create Accounts -->
        <div id="create-account-container">
            <button id="create-account-btn" onclick="createNewAccount()">Create Account (Core/Pioneer)</button>
        </div>
    </div>

    <!-- Room List -->
    <div class="room-panel">
        <h3>Rooms</h3>
        <div id="room-list">
            <!-- Buttons for rooms will appear here -->
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel">
        <h3>Admin Panel</h3>
        <button onclick="promptCreateRoom()">Create Room</button>
        <button onclick="promptDeleteRoom()">Delete Room</button>

        <div id="room-info-panel">
            <h4>Room Info</h4>
            <ul id="room-members"></ul>
        </div>
    </div>

</div>

<script>
function promptCreateRoom() {
    const code = prompt("Enter room code:");
    if (code) window.createRoom(code);
}

function promptDeleteRoom() {
    const code = prompt("Enter room code:");
    if (code) window.deleteRoom(code);
}

// Function for Core/Pioneer to create new users
window.createNewAccount = async function() {
    const username = prompt("Enter username:");
    const password = prompt("Enter password:");
    const displayName = prompt("Enter display name:");
    if (!username || !password || !displayName) return;

    const userRef = firebase.database().ref("users/" + username);
    const snap = await get(userRef);
    if (snap.exists()) { alert("User already exists!"); return; }

    await set(userRef, { password, displayName, rank: "newbie", credits: 0 });
    alert("Account created!");
};
</script>

</body>
</html>
