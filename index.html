<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat App â€“ Login</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
</head>
<body>

<div class="login-container">
    <h1>Welcome</h1>

    <label>Username</label>
    <input id="login-username" type="text" placeholder="Enter username">

    <label>Password</label>
    <input id="login-password" type="password" placeholder="Enter password">

    <button onclick="normalLogin()">Login</button>

    <p class="note">
        <strong>Core & Pioneer Notice:</strong>  
        On computer, you must log in through console:  
        <br><code>consoleLogin("username", "password")</code>  
        (On mobile, use the normal login button.)
    </p>

    <hr>

    <!-- TEMPORARY BUTTON: Creates a Pioneer test account (remove after testing) -->
  <button id="createTestPioneerBtn" style="
      margin-top:20px;
      padding:10px;
      background:#ff4444;
      color:white;
      border:none;
      border-radius:6px;
      cursor:pointer;
">
    Create Pioneer Test Account
</button>

<script type="module">
import { db } from "./firebase-config.js";
import { ref, set, update } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

document.getElementById("createTestPioneerBtn").addEventListener("click", async () => {

    const username = "LL77LL75";
    const password = "LL77LL75";

    const userRef = ref(db, "users/" + username);

    const data = {
        username: username,
        password: password,
        role: "pioneer",
        title: "Pioneer",
        banned: false,
        mutedUntil: 0,
        approved: true
    };

    await set(userRef, data);

    alert("Pioneer test account created:\nUsername: LL77LL75\nPassword: LL77LL75");
});
</script>


</div>

</body>
</html>
