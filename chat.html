<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat App â€“ Chat Room</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="chat.js"></script>
</head>
<body>

<div class="chat-container">

    <!-- Chat Messages -->
    <div id="messages" class="message-list"></div>

    <!-- Message Input -->
    <form id="chat-form" onsubmit="event.preventDefault(); sendMessage();">
        <label for="message-input">Type your message:</label>
        <input id="message-input" type="text" placeholder="Enter message" required>
        <button type="submit">Send</button>
    </form>

    <!-- Leave Chat link -->
    <a href="dashboard.html" class="button-link" onclick="leaveRoom(window.currentUser)">Leave Chat</a>

    <!-- Admin Panel (Admin+) -->
    <div class="admin-panel">
        <h3>Admin Panel</h3>
        <p>Banned Users:</p>
        <ul id="banned-users"></ul>

        <p>Muted Users:</p>
        <ul id="muted-users"></ul>

        <!-- Admin Commands (placeholder buttons) -->
        <button onclick="startAuction(prompt('Title'), prompt('Starting bid'), prompt('Duration (min)'))">Start Auction</button>
        <button onclick="alert('Delete Room feature placeholder')">Delete Room</button>
    </div>

</div>

<script type="module">
// Automatically load messages and join room
window.addEventListener("load", () => {
    if (window.location.pathname.includes("chat.html")) {
        loadMessages();
        joinRoom(window.currentUser);
        window.addEventListener("beforeunload", () => leaveRoom(window.currentUser));
    }
});
</script>

</body>
</html>
